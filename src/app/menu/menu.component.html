<!-- menu.component.html -->
<div class="sidebar">
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav flex-column">
          <li class="nav-item">
            <h2>Cassandra Shop</h2>
          </li>

          <ng-container *ngIf="isLoggedIn && user">
            <li class="nav-item">
              <h3>{{ this.user?.usuario }} - {{ this.user?.rol }}</h3>
              <span *ngIf="this.user.sucursal"
                >Sucursal: {{ this.user.sucursal.nombre }}</span
              >
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="navbarDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Productos</a
              >
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li>
                  <a class="dropdown-item" routerLink="/productos">Todos</a>
                </li>
                <li *ngFor="let categoria of categorias">
                  <a
                    class="dropdown-item"
                    [routerLink]="['/productos', { categoria: categoria }]"
                    (click)="seleccionarCategoria(categoria)"
                    >{{ categoria }}</a
                  >
                </li>
              </ul>
            </li>
            <li
              class="nav-item"
              *ngIf="user?.rol === 'Director' || user?.rol === 'Gerente'"
            >
              <a
                class="nav-link"
                routerLink="/reportes"
                routerLinkActive="active"
                >Reportes</a
              >
            </li>
            <li class="nav-item" *ngIf="user?.rol === 'Director'">
              <a class="nav-link" routerLink="/signup" routerLinkActive="active"
                >Nuevo-usuario</a
              >
            </li>
            <li
              class="nav-item"
              *ngIf="user?.rol === 'Director' || user?.rol === 'Gerente'"
            >
              <a
                class="nav-link"
                routerLink="/lista-usuarios"
                routerLinkActive="active"
                >Usuarios</a
              >
            </li>
            <li
              class="nav-item"
              *ngIf="user?.rol === 'Director' || user?.rol === 'Gerente'"
            >
              <a
                class="nav-link"
                routerLink="/agregar-producto"
                routerLinkActive="active"
                >Agregar-Producto</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                routerLink="/mis-ventas"
                routerLinkActive="active"
                >Mis ventas</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                routerLink="/carrito"
                routerLinkActive="active"
              >
                <i class="bi bi-cart">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="26"
                    height="26"
                    fill="currentColor"
                    class="bi bi-cart4"
                    viewBox="0 0 16 16"
                  >
                    <path
                      d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"
                    />
                  </svg>
                </i>
                <span>
                  {{ cartItemCount }}
                </span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" (click)="logout()">Salir</a>
            </li>
          </ng-container>
        </ul>
      </div>
    </div>
  </nav>
</div>
